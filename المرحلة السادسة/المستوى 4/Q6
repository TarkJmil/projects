1. إنشاء نموذج الانحدار اللوجستي باستخدام مكتبة Statsmodels

يمكنك استخدام مكتبة statsmodels لإنشاء نموذج الانحدار اللوجستي باتباع الخطوات التالية:

الخطوات الأساسية

1. تحميل المكتبات والبيانات

import pandas as pd
import statsmodels.api as sm
from statsmodels.tools import add_constant


2. إعداد البيانات
لنفترض أن لديك بيانات تحتوي على متغير مستقل X ومتغير تابع ثنائي Y (0 أو 1).

# تحميل البيانات (مثال)
df = pd.DataFrame({
    'X1': [2, 3, 5, 7, 9, 11, 13, 15, 17, 19],
    'X2': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
    'Y': [0, 0, 0, 1, 1, 1, 1, 1, 1, 1]
})


3. إضافة الحد الثابت (Constant)

X = add_constant(df[['X1', 'X2']])  # إضافة الحد الثابت
Y = df['Y']


4. بناء نموذج الانحدار اللوجستي وتقديره

model = sm.Logit(Y, X)  # تحديد النموذج
result = model.fit()  # تدريب النموذج
print(result.summary())  # عرض ملخص النتائج



تفسير النتائج

المعاملات (Coefficients):

إذا كان معامل متغير معين موجبًا، فهذا يشير إلى أن زيادة هذا المتغير تزيد من احتمالية أن يكون Y=1.

إذا كان سالبًا، فهذا يشير إلى أن زيادة هذا المتغير تقلل من احتمالية أن يكون Y=1.


القيمة الاحتمالية (P-value):

إذا كانت أقل من 0.05، فهذا يشير إلى أن المتغير مهم إحصائيًا ويؤثر على Y.

إذا كانت أكبر، فقد لا يكون للمتغير تأثير قوي على التنبؤ.


القيمة اللوجستية (Odds Ratio):

يمكن حسابها باستخدام exp(المعامل)، وتعبر عن نسبة التغير في الاحتمالية لكل وحدة زيادة في المتغير المستقل.




---

2. اختبار التعدد الخطي (Multicollinearity) باستخدام Statsmodels

التعدد الخطي يعني وجود ارتباط قوي بين متغيرين مستقلين أو أكثر، مما قد يؤثر على دقة تقدير المعاملات. يمكن اكتشافه باستخدام عامل تضخم التباين (Variance Inflation Factor - VIF).

حساب VIF باستخدام Statsmodels

from statsmodels.stats.outliers_influence import variance_inflation_factor

# حساب VIF لكل متغير مستقل
vif_data = pd.DataFrame()
vif_data["Feature"] = X.columns
vif_data["VIF"] = [variance_inflation_factor(X.values, i) for i in range(X.shape[1])]

print(vif_data)

تفسير VIF

إذا كان VIF < 5: لا يوجد تعدد خطي خطير.

إذا كان 5 ≤ VIF < 10: يوجد بعض التعدد الخطي، ولكن يمكن التحكم فيه.

إذا كان VIF ≥ 10: هناك تعدد خطي قوي، مما يشير إلى أن أحد المتغيرات يجب إزالته أو تعديله.


التعامل مع التعدد الخطي

إزالة أحد المتغيرات المرتبطة بشدة بآخر.

استخدام تحليل المركبات الأساسية (PCA) لتقليل الأبعاد.

جمع المتغيرات المرتبطة في مؤشر مركب واحد.


بهذه الطريقة، يمكننا بناء نموذج أكثر دقة وتفسيرًا باستخدام statsmodels